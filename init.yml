- name: add 'chris-lea' PPA for Node.js
  apt_repository: repo=ppa:chris-lea/node.js-legacy
  register: result

- name: apt-get update
  apt: update_cache=yes
  when_changed: $result

- name: install 'nodejs'
  apt: pkg=nodejs state=latest

# 'npm' is bundled with 'nodejs' apt package starting from version 0.10.0
- name: install 'npm'
  apt: pkg=npm state=latest
